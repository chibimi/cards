{{ define "profile" }}
{{ end }}

{{ define "rules" }}
<header><p>{{ .Ref.Title }}</p></header>
<section>
	{{ $card := . }}
	{{ range .RefAbilities }}
	<p class="ability"><strong>{{ .Title }}</strong> {{ .Description }}</p>
	{{ end }}
	{{ range .Models }}
	<p class="title">{{ .Title }}</p>
	{{ range index $card.ModelsAbilities .ID }}
	<p class="ability"><strong>{{ .Title }}</strong> {{ .Description }}</p>
	{{ end }}

	{{ if not (eq (len (index $card.WeaponsAbilities .ID)) 0) }}
	{{ range index $card.WeaponsAbilities .ID }}
	<p class="title">{{ .Title }}</p>
	{{ range index $card.WeaponsAbilities .ID }}
	<p class="ability"><strong>{{ .Title }}</strong> {{ .Description }}</p>
	{{ end }}
	{{ end }}
	{{ end }}
	{{ end }}
</section>
{{ end }}

{{ define "spells" }}
<header><p>{{ .Ref.Title }}</p></header>
<section>
	<table>
		<thead>
			<tr>
				<th>spells</th>
				<th>cost</th>
				<th>rng</th>
				<th>aoe</th>
				<th>pow</th>
				<th>dur</th>
				<th>off</th>
			</tr>
		</thead>
		<tbody>
			{{ range .Spells }}
			<tr class="spellline">
				<td>{{ .Name }}<br></td>
				<td>{{ .Cost }}</td>
				<td>{{ .RNG }}</td>
				<td>{{ .AOE }}</td>
				<td>{{ .POW }}</td>
				<td>{{ .DUR }}</td>
				<td>{{ .OFF }}</td>
			</tr>
			<tr>
				<td colspan="7">{{ .Description }}</td>
			</tr>
			{{ end }}
		</tbody>
	</table>
</section>
{{ end }}

{{ define "feat" }}
<header><p>{{ .Ref.Title }}</p></header>
<section>
	<p class="title">{{ .Feat.Name }}</p>
	<p class="fluff">{{ .Feat.Fluff }}</p>
	<p class="feat">{{ .Feat.Description}}</p>
</section>
{{ end }}

<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet/less" type="text/css" href="assets/styles/cards.less">
		<script src="//cdnjs.cloudflare.com/ajax/libs/less.js/3.9.0/less.min.js"></script>
	</head>
	<body>
		{{ range . }}
		<div class="card {{ .Type }} {{ .Faction.String | slug }}">
			{{ if eq .Type "rules" }}{{ template "rules" . }}
			{{ else if eq .Type "profile" }}{{ template "profile" . }}
			{{ else if eq .Type "spells" }}{{ template "spells" . }}
			{{ else if eq .Type "feat" }}{{ template "feat" . }}
			{{ end }}
		</div>
		{{ end }}
	</body>
</html>
