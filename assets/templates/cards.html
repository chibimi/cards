{{ define "profile" }}
<div class="card profile" style="background-image: url('assets/images/profile/1.png');">
</div>
{{ end }}

{{ define "rules" }}
<div class="card rules" style="background-image: url('assets/images/rules/{{ .Background }}.png');">
	<header><p>{{ .Ref.Title | safe }}</p></header>
	<section>
		{{ $card := . }}
		{{ range .RefAbilities }}
		<p class="ability"><strong>{{ .Title }}</strong> {{ .Description }}</p>
		{{ end }}
		{{ range .Models }}
		<p class="title">{{ .Title }}</p>
			{{ range index $card.ModelsAbilities .ID }}
			<p class="ability"><strong>{{ .Title }}</strong> {{ .Description }}</p>
			{{ end }}

			{{ if not (eq (len (index $card.WeaponsAbilities .ID)) 0) }}
			{{ range index $card.WeaponsAbilities .ID }}
			<p class="title">{{ .Title }}</p>
				{{ range index $card.WeaponsAbilities .ID }}
				<p class="ability"><strong>{{ .Title }}</strong> {{ .Description }}</p>
				{{ end }}
			{{ end }}
			{{ end }}
		{{ end }}
	</section>
</div>
{{ end }}

{{ define "spells" }}
<div class="card spells" style="background-image: url('assets/images/rules/{{ .Background }}.png');">
	<header><p>{{ .Ref.Title | safe }}</p></header>
	<section>
		<table>
			<thead>
				<tr>
					<th>spells</th>
					<th>cost</th>
					<th>rng</th>
					<th>aoe</th>
					<th>pow</th>
					<th>dur</th>
					<th>off</th>
				</tr>
			</thead>
			<tbody>
				{{ range .Spells }}
				<tr class="spellline">
					<td>{{ .Name }}<br></td>
					<td>{{ .Cost }}</td>
					<td>{{ .RNG }}</td>
					<td>{{ .AOE }}</td>
					<td>{{ .POW }}</td>
					<td>{{ .DUR }}</td>
					<td>{{ .OFF }}</td>
				</tr>
				<tr>
					<td colspan="7">{{ .Description }}</td>
				</tr>
				{{ end }}
			</tbody>
		</table>
	</section>
</div>
{{ end }}

{{ define "feat" }}
<div class="card rules" style="background-image: url('assets/images/rules/{{ .Background }}.png');">
	<header><p>{{ .Ref.Title | safe }}</p></header>
	<section>
		<p class="title">{{ .Feat.Name }}</p>
		<p class="fluff">{{ .Feat.Fluff }}</p>
		<p class="feat">{{ .Feat.Description}}</p>
	</section>
</div>
{{ end }}

<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="assets/styles/cards.css" type="text/css">
	</head>
	<body>
		{{ range . }}
			{{ if eq .Type "rules" }}{{ template "rules" . }}
			{{ else if eq .Type "profile" }}{{ template "profile" . }}
			{{ else if eq .Type "spells" }}{{ template "spells" . }}
			{{ else if eq .Type "feat" }}{{ template "feat" . }}
			{{ end }}
		{{ end }}
	</body>
</html>
